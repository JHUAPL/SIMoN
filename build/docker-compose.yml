version: '3'

services:

        armington:
                build: ../models/examples/armington/
                volumes:
                        - ../models/examples/armington:/opt:ro

        civil_conflict:
                build: ../models/examples/civil_conflict/
                volumes:
                        - ../models/examples/civil_conflict:/opt:ro

        mongodb:
                image: mongo:latest
                container_name: mongodb
                labels:
                        simon: "database"
                volumes:
                        - ../data/db:/data/db
                expose:
                        - "27017"
                ports:
                        - "27017:27017"
                environment:
                        - MONGO_URI=mongodb:27017

        broker:
                build: ../broker/
                container_name: broker
                labels:
                        simon: "broker"
                volumes:
                        - ../broker:/opt:ro
