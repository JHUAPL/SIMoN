version: '3'

services:
        population:
                build: ../models/examples/population/
                volumes:
                        - ../models/examples/population:/opt:ro

        mongodb:
                image: mongo:latest
                container_name: mongodb
                labels:
                        simon: "database"
                volumes:
                        - ../data/db:/data/db
                expose:
                        - "27017"
                ports:
                        - "27017:27017"
                environment:
                        - MONGO_URI=mongodb:27017

        broker:
                build: ../broker/
                container_name: broker
                labels:
                        simon: "broker"
                volumes:
                        - ../broker:/opt:ro
