version: '3'

services:
        population:
                build: ../models/examples/population/
                volumes:
                        - ../models/examples/population:/opt:ro

        power_demand:
                build: ../models/examples/power_demand/
                volumes:
                        - ../models/examples/power_demand:/opt:ro

        power_supply:
                build: ../models/examples/power_supply/
                volumes:
                        - ../models/examples/power_supply:/opt:ro

        hector:
                build: ../models/examples/hector/
                volumes:
                - ../models/examples/hector:/opt:ro

        water:
                build: ../models/examples/water/
                volumes:
                - ../models/examples/water:/opt:ro
        waterdemand: 
                build: ../models/examples/waterdemand/
                volumes:
                - ../models/examples/waterdemand:/opt:ro

        mongodb:
                image: mongo:latest
                container_name: mongodb
                labels:
                        simon: "database"
                volumes:
                        - ../data/db:/data/db
                expose:
                        - "27017"
                ports:
                        - "27017:27017"
                environment:
                        - MONGO_URI=mongodb:27017

        broker:
                build: ../broker/
                container_name: broker
                labels:
                        simon: "broker"
                volumes:
                        - ../broker:/opt:ro
